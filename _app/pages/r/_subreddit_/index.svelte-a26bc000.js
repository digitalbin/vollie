import{S as B,i as C,s as E,l as p,g as m,I as $,p as y,q as d,o as g,d as _,k as M,w as b,m as J,x as w,y as P,B as v,N as j,Y as O,e as Q,c as T,a as U,b as Y,n as x,J as N}from"../../../chunks/vendor-d5673dbd.js";import{p as z}from"../../../chunks/stores-941d90f5.js";import{S as A}from"../../../chunks/spinner-1cdf0f01.js";import{P as F,f as G}from"../../../chunks/index-09a2344c.js";import"../../../chunks/paths-4b3c6e7e.js";import"../../../chunks/index-e02fe488.js";function I(f,s,r){const t=f.slice();return t[5]=s[r].children,t[6]=s[r].after,t}function S(f,s,r){const t=f.slice();return t[9]=s[r].data,t}function D(f,s){let r,t,i;return t=new F({props:{data:s[9]}}),{key:f,first:null,c(){r=Q("section"),b(t.$$.fragment),this.h()},l(l){r=T(l,"SECTION",{class:!0});var o=U(r);w(t.$$.fragment,o),o.forEach(_),this.h()},h(){Y(r,"class","svelte-1xrgh15"),this.first=r},m(l,o){m(l,r,o),P(t,r,null),i=!0},p(l,o){s=l;const h={};o&1&&(h.data=s[9]),t.$set(h)},i(l){i||(d(t.$$.fragment,l),i=!0)},o(l){g(t.$$.fragment,l),i=!1},d(l){l&&_(r),v(t)}}}function q(f,s){let r,t=[],i=new Map,l,o,h=s[5];const c=a=>a[9].id;for(let a=0;a<h.length;a+=1){let e=S(s,h,a),n=c(e);i.set(n,t[a]=D(n,e))}return{key:f,first:null,c(){r=p();for(let a=0;a<t.length;a+=1)t[a].c();l=p(),this.h()},l(a){r=p();for(let e=0;e<t.length;e+=1)t[e].l(a);l=p(),this.h()},h(){this.first=r},m(a,e){m(a,r,e);for(let n=0;n<t.length;n+=1)t[n].m(a,e);m(a,l,e),o=!0},p(a,e){s=a,e&1&&(h=s[5],x(),t=$(t,e,c,1,s,h,i,l.parentNode,N,D,l,S),y())},i(a){if(!o){for(let e=0;e<h.length;e+=1)d(t[e]);o=!0}},o(a){for(let e=0;e<t.length;e+=1)g(t[e]);o=!1},d(a){a&&_(r);for(let e=0;e<t.length;e+=1)t[e].d(a);a&&_(l)}}}function H(f){var c,a;let s=[],r=new Map,t,i,l,o=(a=(c=f[0])==null?void 0:c.data)==null?void 0:a.pages;const h=e=>e[6];for(let e=0;e<o.length;e+=1){let n=I(f,o,e),u=h(n);r.set(u,s[e]=q(u,n))}return i=new A({}),i.$on("inview",f[2]),{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=M(),b(i.$$.fragment)},l(e){for(let n=0;n<s.length;n+=1)s[n].l(e);t=J(e),w(i.$$.fragment,e)},m(e,n){for(let u=0;u<s.length;u+=1)s[u].m(e,n);m(e,t,n),P(i,e,n),l=!0},p(e,[n]){var u,k;n&1&&(o=(k=(u=e[0])==null?void 0:u.data)==null?void 0:k.pages,x(),s=$(s,n,h,1,e,o,r,t.parentNode,N,q,t,I),y())},i(e){if(!l){for(let n=0;n<o.length;n+=1)d(s[n]);d(i.$$.fragment,e),l=!0}},o(e){for(let n=0;n<s.length;n+=1)g(s[n]);g(i.$$.fragment,e),l=!1},d(e){for(let n=0;n<s.length;n+=1)s[n].d(e);e&&_(t),v(i,e)}}}function K(f,s,r){let t,i;j(f,z,c=>r(3,i=c));const o=O("posts",async({pageParam:c})=>{const{data:a}=await G(`/r/${i.params.subreddit}`,{after:c});return a},{getNextPageParam:c=>c==null?void 0:c.after,initialData:{pages:[]}});return j(f,o,c=>r(0,t=c)),[t,o,({detail:{inView:c}})=>{c&&t.fetchNextPage()}]}class ee extends B{constructor(s){super();C(this,s,K,H,E,{})}}export{ee as default};
