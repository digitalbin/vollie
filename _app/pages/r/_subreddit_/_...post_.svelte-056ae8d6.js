import{S as W,i as X,s as Y,e as b,k as T,w as C,t as U,c as j,a as E,d,m as P,x as F,h as V,b as B,a2 as I,g as D,F as p,y as M,L as he,G as Z,q as v,o as y,B as R,l as x,a1 as _e,n as z,p as K,a3 as ee,ah as de,I as me,N as te,ai as pe,J as ge}from"../../../chunks/vendor-aa264adb.js";import{p as ve}from"../../../chunks/stores-f088776d.js";import{p as le}from"../../../chunks/index-90638a40.js";import{A as ke,f as $e,P as be}from"../../../chunks/index-f48e3f9e.js";import{t as je,k as Ee}from"../../../chunks/index-e02fe488.js";import"../../../chunks/paths-4b3c6e7e.js";const{Boolean:ye}=de;function ae(r,t,l){const e=r.slice();return e[14]=t[l],e[16]=l,e}function Le(r){let t,l,e,a,i,n,s,u,h,g,o,c=je(r[6])+"",f,w,G=Ee(r[5])+"",N,S,L,A,J,Q;i=new ke({props:{type:"user",name:r[4]}});let m=!r[1]&&se(r),$=r[8]&&Be(r);return{c(){t=b("li"),l=b("div"),e=b("button"),a=T(),C(i.$$.fragment),n=T(),s=b("div"),m&&m.c(),u=T(),h=b("div"),g=T(),o=b("p"),f=U(c),w=U(" \u2022 "),N=U(G),S=U(" upvotes"),L=T(),$&&$.c(),this.h()},l(_){t=j(_,"LI",{class:!0});var k=E(t);l=j(k,"DIV",{class:!0});var q=E(l);e=j(q,"BUTTON",{class:!0}),E(e).forEach(d),a=P(q),F(i.$$.fragment,q),n=P(q),s=j(q,"DIV",{class:!0});var H=E(s);m&&m.l(H),u=P(H),h=j(H,"DIV",{class:!0});var ue=E(h);ue.forEach(d),g=P(H),o=j(H,"P",{class:!0});var O=E(o);f=V(O,c),w=V(O," \u2022 "),N=V(O,G),S=V(O," upvotes"),O.forEach(d),H.forEach(d),q.forEach(d),L=P(k),$&&$.l(k),k.forEach(d),this.h()},h(){B(e,"class","svelte-13pjjkd"),B(h,"class","comment svelte-13pjjkd"),I(h,"collapsed",!r[1]),B(o,"class","svelte-13pjjkd"),B(s,"class","text-container svelte-13pjjkd"),B(l,"class","container svelte-13pjjkd"),I(l,"thread",r[1]&&(!r[0]||r[8])),B(t,"class","svelte-13pjjkd"),I(t,"thread",!r[0])},m(_,k){D(_,t,k),p(t,l),p(l,e),p(l,a),M(i,l,null),p(l,n),p(l,s),m&&m.m(s,null),p(s,u),p(s,h),h.innerHTML=r[9],p(s,g),p(s,o),p(o,f),p(o,w),p(o,N),p(o,S),p(t,L),$&&$.m(t,null),A=!0,J||(Q=he(e,"click",r[2]),J=!0)},p(_,k){_[1]?m&&(m.d(1),m=null):m?m.p(_,k):(m=se(_),m.c(),m.m(s,u)),k&2&&I(h,"collapsed",!_[1]),k&259&&I(l,"thread",_[1]&&(!_[0]||_[8])),_[8]&&$.p(_,k),k&1&&I(t,"thread",!_[0])},i(_){A||(v(i.$$.fragment,_),v($),A=!0)},o(_){y(i.$$.fragment,_),y($),A=!1},d(_){_&&d(t),R(i),m&&m.d(),$&&$.d(),J=!1,Q()}}}function se(r){let t,l;return{c(){t=b("h3"),l=U(r[4])},l(e){t=j(e,"H3",{});var a=E(t);l=V(a,r[4]),a.forEach(d)},m(e,a){D(e,t,a),p(t,l)},p:Z,d(e){e&&d(t)}}}function Be(r){let t,l,e=r[7],a=[];for(let n=0;n<e.length;n+=1)a[n]=ne(ae(r,e,n));const i=n=>y(a[n],1,1,()=>{a[n]=null});return{c(){t=b("ul");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){t=j(n,"UL",{class:!0});var s=E(t);for(let u=0;u<a.length;u+=1)a[u].l(s);s.forEach(d),this.h()},h(){B(t,"class","svelte-13pjjkd"),I(t,"collapsed",!r[1])},m(n,s){D(n,t,s);for(let u=0;u<a.length;u+=1)a[u].m(t,null);l=!0},p(n,s){if(s&128){e=n[7];let u;for(u=0;u<e.length;u+=1){const h=ae(n,e,u);a[u]?(a[u].p(h,s),v(a[u],1)):(a[u]=ne(h),a[u].c(),v(a[u],1),a[u].m(t,null))}for(z(),u=e.length;u<a.length;u+=1)i(u);K()}s&2&&I(t,"collapsed",!n[1])},i(n){if(!l){for(let s=0;s<e.length;s+=1)v(a[s]);l=!0}},o(n){a=a.filter(ye);for(let s=0;s<a.length;s+=1)y(a[s]);l=!1},d(n){n&&d(t),ee(a,n)}}}function ne(r){let t,l;return t=new oe({props:{data:r[14].data,isLast:r[16]===r[7].length-1}}),{c(){C(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,a){M(t,e,a),l=!0},p:Z,i(e){l||(v(t.$$.fragment,e),l=!0)},o(e){y(t.$$.fragment,e),l=!1},d(e){R(t,e)}}}function we(r){let t,l,e=r[3]&&Le(r);return{c(){e&&e.c(),t=x()},l(a){e&&e.l(a),t=x()},m(a,i){e&&e.m(a,i),D(a,t,i),l=!0},p(a,[i]){a[3]&&e.p(a,i)},i(a){l||(v(e),l=!0)},o(a){y(e),l=!1},d(a){e&&e.d(a),a&&d(t)}}}function Ie(r,t,l){var S;let{data:e}=t,{isLast:a}=t,i=!0;const n=()=>{l(1,i=!i)},{body_html:s="",author:u,replies:h,ups:g,created:o}=e,c=(S=h==null?void 0:h.data)==null?void 0:S.children.filter(({data:{body_html:L}})=>Boolean(L)),f=c&&c.length>0,w=`<h3>${u} </h3>`,N=_e.decode(s).replace(">",">"+w);return r.$$set=L=>{"data"in L&&l(10,e=L.data),"isLast"in L&&l(0,a=L.isLast)},[a,i,n,s,u,g,o,c,f,N,e]}class oe extends W{constructor(t){super();X(this,t,Ie,we,Y,{data:10,isLast:0})}}function re(r,t,l){const e=r.slice();return e[6]=t[l],e}function ie(r,t,l){const e=r.slice();return e[9]=t[l],e}function ce(r){let t,l,e;return l=new be({props:{data:r[9].data}}),{c(){t=b("section"),C(l.$$.fragment),this.h()},l(a){t=j(a,"SECTION",{class:!0});var i=E(t);F(l.$$.fragment,i),i.forEach(d),this.h()},h(){B(t,"class","svelte-qgov6")},m(a,i){D(a,t,i),M(l,t,null),e=!0},p(a,i){const n={};i&1&&(n.data=a[9].data),l.$set(n)},i(a){e||(v(l.$$.fragment,a),e=!0)},o(a){y(l.$$.fragment,a),e=!1},d(a){a&&d(t),R(l)}}}function fe(r,t){let l,e,a,i;return e=new oe({props:{data:t[6].data,isLast:!1}}),{key:r,first:null,c(){l=b("ul"),C(e.$$.fragment),a=T(),this.h()},l(n){l=j(n,"UL",{});var s=E(l);F(e.$$.fragment,s),a=P(s),s.forEach(d),this.h()},h(){this.first=l},m(n,s){D(n,l,s),M(e,l,null),p(l,a),i=!0},p(n,s){t=n;const u={};s&2&&(u.data=t[6].data),e.$set(u)},i(n){i||(v(e.$$.fragment,n),i=!0)},o(n){y(e.$$.fragment,n),i=!1},d(n){n&&d(l),R(e)}}}function De(r){let t,l,e=[],a=new Map,i,n=r[0],s=[];for(let o=0;o<n.length;o+=1)s[o]=ce(ie(r,n,o));const u=o=>y(s[o],1,1,()=>{s[o]=null});let h=r[1];const g=o=>o[6].data.id;for(let o=0;o<h.length;o+=1){let c=re(r,h,o),f=g(c);a.set(f,e[o]=fe(f,c))}return{c(){for(let o=0;o<s.length;o+=1)s[o].c();t=T(),l=b("div");for(let o=0;o<e.length;o+=1)e[o].c();this.h()},l(o){for(let f=0;f<s.length;f+=1)s[f].l(o);t=P(o),l=j(o,"DIV",{class:!0});var c=E(l);for(let f=0;f<e.length;f+=1)e[f].l(c);c.forEach(d),this.h()},h(){B(l,"class","svelte-qgov6")},m(o,c){for(let f=0;f<s.length;f+=1)s[f].m(o,c);D(o,t,c),D(o,l,c);for(let f=0;f<e.length;f+=1)e[f].m(l,null);i=!0},p(o,[c]){if(c&1){n=o[0];let f;for(f=0;f<n.length;f+=1){const w=ie(o,n,f);s[f]?(s[f].p(w,c),v(s[f],1)):(s[f]=ce(w),s[f].c(),v(s[f],1),s[f].m(t.parentNode,t))}for(z(),f=n.length;f<s.length;f+=1)u(f);K()}c&2&&(h=o[1],z(),e=me(e,c,g,1,o,h,a,l,ge,fe,null,re),K())},i(o){if(!i){for(let c=0;c<n.length;c+=1)v(s[c]);for(let c=0;c<h.length;c+=1)v(e[c]);i=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)y(s[c]);for(let c=0;c<e.length;c+=1)y(e[c]);i=!1},d(o){ee(s,o),o&&d(t),o&&d(l);for(let c=0;c<e.length;c+=1)e[c].d()}}}function Te(r,t,l){let e,a;te(r,le,h=>l(2,e=h)),te(r,ve,h=>l(3,a=h));let i=[],n=[],s;const u=()=>$e(a.url.pathname).then(([{data:h},g])=>{l(0,i=[...i,...h.children]),l(1,n=[...n,...g.data.children])});return r.$$.update=()=>{var h,g;if(r.$$.dirty&1&&(i.length===0||s===i.length-2)&&u(),r.$$.dirty&1){const o=(g=(h=i==null?void 0:i[0])==null?void 0:h.data)==null?void 0:g.title;o&&pe(le,e=o,e)}},[i,n]}class Ue extends W{constructor(t){super();X(this,t,Te,De,Y,{})}}export{Ue as default};
